<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="John Shelburne" /><link rel="canonical" href="https://www.johnshelburne.com/mkdocs/Classifications/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Classification Filtering in Bonds - MkDocs Material</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/tokyonight.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Classification Filtering in Bonds";
        var mkdocs_page_input_path = "Classifications.md";
        var mkdocs_page_url = "/mkdocs/Classifications/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../images/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../1-Ingest-Domain/">The Ingest Domain</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Bloomberg/">Bloomberg</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Bond-Universe/">Purpose</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Candidate/">Candidate</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Classification Filtering in Bonds</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#breakdown-of-the-has_correct_classification-filtering-process">Breakdown of the has_correct_classification Filtering Process</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-super-type-and-sub-type">1. Super Type and Sub Type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-universe-specific-preferences">2. Universe-Specific Preferences</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-filtering-logic">3. Filtering Logic</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-inclusion-and-exclusion-lists">4. Inclusion and Exclusion Lists</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-scenario">Example Scenario</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#purpose-of-the-classification-filter">Purpose of the Classification Filter</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#location-of-logic-for-classification-filtering">Location of Logic for Classification Filtering</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#key-elements-in-the-classification-filtering">Key Elements in the Classification Filtering</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-filtering-scenario">Example Filtering Scenario</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#code-reference">Code Reference</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Data-Source-Specifications/">Data Source Specifications</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Domain-Model/">Combined Domain Model Diagram</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../EWM-DOD-Definitions/">Tolerance Metrics ewm_tolerance and dod_tolerance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Front-End/">The Front End</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Functions/">Functions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../GCP-Alternatives/">GCP Current Workflow</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Generate/">Generate Domain</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Idea-Generation/">Idea Candidate Creation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Important-Definitions/">Understanding Key Concepts**</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Questions/">Research on Current Questions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../model/">Forecasting Models - How many exist?</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../stationary-model/">Stationarity Model</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">MkDocs Material</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Classification Filtering in Bonds</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="classification-filtering-in-bonds">Classification Filtering in Bonds</h1>
<p>The <strong>Classification Filtering</strong> implemented in the method <code>has_correct_classification</code> ensures that bonds are filtered based on their <strong>classification</strong> attributes, which are usually defined in terms of a <strong>super type</strong> and a <strong>sub type</strong>. These classifications represent how a bond is categorized within a financial domain, such as its asset class, industry sector, or security type.</p>
<h2 id="breakdown-of-the-has_correct_classification-filtering-process">Breakdown of the <code>has_correct_classification</code> Filtering Process</h2>
<h3 id="1-super-type-and-sub-type">1. <strong>Super Type and Sub Type</strong></h3>
<ul>
<li>Every bond can be classified by a <strong>super type</strong> and a <strong>sub type</strong>, which represent broad and specific categories, respectively. For example:<ul>
<li><strong>Super Type</strong> could be something general like "Corporate Bond" or "Government Bond."</li>
<li><strong>Sub Type</strong> could further narrow down the category, such as "Investment Grade Corporate Bond" or "Municipal Government Bond."</li>
</ul>
</li>
</ul>
<h3 id="2-universe-specific-preferences">2. <strong>Universe-Specific Preferences</strong></h3>
<ul>
<li>Each <strong>Universe</strong> defines a set of <strong>preferred classifications</strong> (both super type and sub type). These preferences indicate what types of bonds are allowed to pass through the filter and be included in that universe.</li>
<li>For example, a universe may specify that it only includes "Government Bonds" (super type) with "Sovereign" or "Agency" classifications (sub type). Any bonds that don't match this classification will be filtered out.</li>
</ul>
<h3 id="3-filtering-logic">3. <strong>Filtering Logic</strong></h3>
<ul>
<li>The <code>has_correct_classification</code> method checks the bond's classification against the universe's specified preferences:<ul>
<li><strong>Super Type Matching</strong>: First, it verifies if the bond's super type matches one of the preferred super types for that universe.</li>
<li><strong>Sub Type Matching</strong>: If the super type matches, it then checks if the bond's sub type is also in the list of preferred sub types.</li>
</ul>
</li>
<li>If both the super type and sub type match the universe's specifications, the bond passes this filter and is included for further processing. If not, the bond is excluded.</li>
</ul>
<h3 id="4-inclusion-and-exclusion-lists">4. <strong>Inclusion and Exclusion Lists</strong></h3>
<ul>
<li>The filtering mechanism might also have <strong>inclusion</strong> and <strong>exclusion lists</strong>. This means that:<ul>
<li>Bonds explicitly listed in an <strong>inclusion list</strong> will pass through, regardless of their classification.</li>
<li>Bonds in an <strong>exclusion list</strong> will be filtered out, even if their classification would normally pass the filter.</li>
</ul>
</li>
</ul>
<h2 id="example-scenario">Example Scenario</h2>
<p>Imagine the following universe settings:</p>
<ul>
<li><strong>Super Type</strong>: Corporate Bond</li>
<li><strong>Sub Type</strong>: Investment Grade, High Yield</li>
</ul>
<p>And the bond classifications are:</p>
<ul>
<li><strong>Bond A</strong>: Corporate Bond (Super Type), Investment Grade (Sub Type) -- <strong>Passes the filter</strong>.</li>
<li><strong>Bond B</strong>: Corporate Bond (Super Type), High Yield (Sub Type) -- <strong>Passes the filter</strong>.</li>
<li><strong>Bond C</strong>: Government Bond (Super Type), Sovereign (Sub Type) -- <strong>Fails the filter</strong> because the super type doesn't match the universe's settings.</li>
<li><strong>Bond D</strong>: Corporate Bond (Super Type), Speculative (Sub Type) -- <strong>Fails the filter</strong> because the sub type is not part of the preferred classifications.</li>
</ul>
<h2 id="purpose-of-the-classification-filter">Purpose of the Classification Filter</h2>
<p>The classification filter ensures that only bonds which belong to specific financial categories, as defined by the universe, are included in the analysis or trade idea generation process. This allows financial analysts or automated systems to focus only on bonds that fit their investment strategies or risk profiles, which are often defined by classification.</p>
<h2 id="location-of-logic-for-classification-filtering">Location of Logic for Classification Filtering</h2>
<p><a href="https://gitlab.com/katanalabs/katana/-/blob/master/pipelines/generate/domain/bond.py">Classification filtering logic in bond.py</a></p>
<h2 id="key-elements-in-the-classification-filtering">Key Elements in the Classification Filtering</h2>
<ol>
<li>
<p><strong>Classifications in the Universe</strong></p>
<ul>
<li>The universe defines a list of classifications (both super types and sub types) that it prefers. These are specified within the <code>universe.classifications</code> list.</li>
</ul>
</li>
<li>
<p><strong>Classification Super Type and Sub Type</strong></p>
<ul>
<li>Bonds are categorized by both a <strong>super type</strong> (e.g., "Corporate", "Government") and a <strong>sub type</strong> (e.g., "Domestic", "Eurobond").</li>
<li>The filtering logic first checks the bond's <strong>super type</strong> against the universe's preferences, and then it checks the <strong>sub type</strong> to ensure the bond matches.</li>
</ul>
</li>
<li>
<p><strong>Logic Inside <code>has_correct_classification</code></strong></p>
<ul>
<li>The function loops over the universe's preferred classifications.</li>
<li>If the bond's <strong>super type</strong> matches a preferred super type, the bond passes the filter.</li>
<li>If the bond's <strong>sub type</strong> matches a preferred sub type, the bond also passes the filter.</li>
<li>If both a <strong>super type</strong> and a <strong>sub type</strong> are provided in the form of a tuple (i.e., both are expected to match), the bond must match both to pass the filter.</li>
</ul>
</li>
</ol>
<h2 id="example-filtering-scenario">Example Filtering Scenario</h2>
<ul>
<li>If a universe prefers the classification <strong>Corporate Bonds</strong> (super type) with a sub type of <strong>Domestic</strong>, only bonds that are classified as <strong>Corporate Bonds</strong> with the <strong>Domestic</strong> sub type will pass this filter.</li>
<li>If the universe doesn't specify any classifications, all bonds will pass this part of the filter.</li>
</ul>
<h2 id="code-reference">Code Reference</h2>
<p>This filtering logic is directly implemented in the <code>has_correct_classification</code> function within the <code>BondsUniverseFilter</code> class, located in your file.
```</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Candidate/" class="btn btn-neutral float-left" title="Candidate"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Data-Source-Specifications/" class="btn btn-neutral float-right" title="Data Source Specifications">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Candidate/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Data-Source-Specifications/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
