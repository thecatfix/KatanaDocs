<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="A documentation site for MkDocs Material" /><meta name="author" content="John Shelburne" /><link rel="canonical" href="https://www.johnshelburne.com/mkdocs/" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>MkDocs Material</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="css/tokyonight.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Welcome To The Katana Wiki";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = "/mkdocs/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".">
          <img src="images/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="1-Ingest-Domain/">The Ingest Domain</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Bloomberg/">Bloomberg</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Bond-Universe/">Purpose</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Candidate/">Candidate</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Classifications/">Classification Filtering in Bonds</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Data-Source-Specifications/">Data Source Specifications</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Domain-Model/">Combined Domain Model Diagram</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="EWM-DOD-Definitions/">Tolerance Metrics ewm_tolerance and dod_tolerance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Front-End/">The Front End</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Functions/">Functions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="GCP-Alternatives/">GCP Current Workflow</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Generate/">Generate Domain</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Idea-Generation/">Idea Candidate Creation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Important-Definitions/">Understanding Key Concepts**</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="Questions/">Research on Current Questions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="model/">Forecasting Models - How many exist?</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="stationary-model/">Stationarity Model</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">MkDocs Material</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Welcome To The Katana Wiki</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="welcome-to-the-katana-wiki">Welcome To The Katana Wiki</h1>
<p><strong>Katana Diagram Workflow Questions that we need to ask: what is the workflow here</strong></p>
<p>This is a general step-by-step workflow that outlines how to use Apache Beam with Google Dataflow to transform securities into pairs, covering the stages of ingestion, cleaning, filtering, warehousing, and the Beam pipeline.</p>
<p>The code provides flexible and precise filtering of bonds and application of appropriate models for each universe in downstream processes.</p>
<h2 id="generating-pipelines">Generating Pipelines</h2>
<p><strong>Source Code Location</strong></p>
<p><strong>Docker Images</strong>
https://console.cloud.google.com/gcr/images/quasar-production/eu/dataflow/templates/flex?project=quasar-production</p>
<p>https://console.cloud.google.com/gcr/images/lens-development?project=lens-development</p>
<p><strong>Step 1: Ingestion</strong>
1. <strong>Data Source Identification</strong>: Identify the source of your securities data, which could be a database, CSV files, APIs, or real-time streaming data.
2. <strong>Data Ingestion</strong>:
- For batch data, use FileIO to read from CSV or JSON files.
- For streaming data, use PubSub or other streaming sources.</p>
<pre><code>  import apache_beam as beam

   # Example for reading from a CSV file
   with beam.Pipeline() as pipeline:
       securities_data = (
           pipeline
           | 'ReadFromCSV' &gt;&gt; beam.io.ReadFromText('gs://your-bucket/securities.csv', skip_header_lines=1)
       )
</code></pre>
<p><strong>Step 2: Cleaning</strong>
3. <strong>Data Cleaning</strong>:
- Remove any leading/trailing whitespace.
- Handle missing values (e.g., remove records with null values).
- Normalize data (e.g., standardize formats).</p>
<pre><code>  def clean_data(record):
       # Implement cleaning logic here
       return cleaned_record

   cleaned_data = (
       securities_data
       | 'CleanData' &gt;&gt; beam.Map(clean_data)
   )
</code></pre>
<p><strong>Step 3: Filtering</strong>
4. <strong>Data Filtering</strong>:
- Filter out unwanted records based on specific criteria (e.g., only include securities above a certain market cap).</p>
<pre><code>  def filter_securities(record):
       # Implement filtering logic here
       return is_valid_record

   filtered_data = (
       cleaned_data
       | 'FilterSecurities' &gt;&gt; beam.Filter(filter_securities)
   )
</code></pre>
<p><strong>Step 4: Pairing</strong>
5. <strong>Pairing Securities</strong>:
- Transform the filtered data into pairs based on your criteria (e.g., pairing by sector, market cap, etc.).</p>
<pre><code>  def pair_securities(security_list):
       # Implement pairing logic here
       return pairs

   paired_data = (
       filtered_data
       | 'PairSecurities' &gt;&gt; beam.Map(pair_securities)
   )
</code></pre>
<p><strong>Step 5: Warehousing</strong>
<strong>Data Warehousing</strong>:
- Write the transformed data to a data warehouse or storage solution (e.g., BigQuery, Cloud Storage).</p>
<pre><code>  paired_data | 'WriteToBigQuery' &gt;&gt; beam.io.WriteToBigQuery(
       'your_project_id:your_dataset.your_table',
       schema='SCHEMA_AUTODETECT',
       write_disposition=beam.io.BigQueryDisposition.WRITE_APPEND
   )

</code></pre>
<p><strong>Step 6: Run the Pipeline</strong>
7. <strong>Run the Dataflow Pipeline</strong>:
- Execute the pipeline on Google Cloud Dataflow.</p>
<pre><code>
  options = beam.options.pipeline_options.GoogleCloudOptions(
       project='your_project_id',
       job_name='securities-pairing',
       temp_location='gs://your-bucket/temp/',
       region='your-region'
   )
   pipeline_options = beam.options.pipeline_options.PipelineOptions(flags=[], **options)

   with beam.Pipeline(options=pipeline_options) as pipeline:
       # Include all previous steps here
</code></pre>
<p>Summary
This workflow outlines the steps to ingest, clean, filter, pair, and warehouse securities data using Apache Beam and Google Dataflow. You can customize the cleaning, filtering, and pairing logic according to your specific requirements. Make sure to handle exceptions and logging for better monitoring of your pipeline execution.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="1-Ingest-Domain/" class="btn btn-neutral float-right" title="The Ingest Domain">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="1-Ingest-Domain/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2025-04-19 21:46:32.212083+00:00
-->
