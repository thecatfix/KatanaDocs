<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="John Shelburne" /><link rel="canonical" href="https://www.johnshelburne.com/mkdocs/Bond-Universe/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Purpose - MkDocs Material</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/tokyonight.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Purpose";
        var mkdocs_page_input_path = "Bond-Universe.md";
        var mkdocs_page_url = "/mkdocs/Bond-Universe/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../images/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../1-Ingest-Domain/">The Ingest Domain</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Bloomberg/">Bloomberg</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Purpose</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#setup-and-configuration">Setup and Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#data-processing-with-apache-beam">Data Processing with Apache Beam</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pipeline-execution">Pipeline Execution</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Candidate/">Candidate</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Classifications/">Classification Filtering in Bonds</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Data-Source-Specifications/">Data Source Specifications</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Domain-Model/">Combined Domain Model Diagram</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../EWM-DOD-Definitions/">Tolerance Metrics ewm_tolerance and dod_tolerance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Front-End/">The Front End</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Functions/">Functions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../GCP-Alternatives/">GCP Current Workflow</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Generate/">Generate Domain</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Idea-Generation/">Idea Candidate Creation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Important-Definitions/">Understanding Key Concepts**</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Questions/">Research on Current Questions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../model/">Forecasting Models - How many exist?</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../stationary-model/">Stationarity Model</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">MkDocs Material</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Purpose</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="purpose">Purpose</h1>
<p><a href="https://gitlab.com/katanalabs/katana/-/blob/master/pipelines/generate/components/ingest_bonds_per_universe.py">Source Code</a></p>
<p>The script's primary purpose is to process bond data from IHS Markit, organize it into different categories (like universes or dropped bonds), and export it to various systems for further analysis or storage. It's a comprehensive tool for managing financial data in a structured and automated way.</p>
<h2 id="setup-and-configuration">Setup and Configuration</h2>
<p>The script starts by setting up the necessary environment. It includes importing libraries and configuring the file path. This is like preparing the workspace with all the tools needed for the job.</p>
<h2 id="data-processing-with-apache-beam">Data Processing with Apache Beam</h2>
<p><strong><em>Classes</em></strong><br />
<strong>IngestBondsPerUniverseOptions:</strong> A class to handle arguments and parameters for the script. It sets up options like run ID, dates, and target tables for exports.</p>
<p><strong>ReadAllBonds:</strong> A custom data transformation (PTransform in Beam terms) that reads bond prices and instruments, filters them, and converts them to a Bond object.</p>
<p>Export Classes:</p>
<p><strong>ExportBonds</strong><br />
<strong>ExportDroppedBonds</strong><br />
<strong>ExportUniverse</strong></p>
<p><strong>These are responsible for exporting processed bond data to different destinations like BigQuery and Pub/Sub.</strong></p>
<h2 id="pipeline-execution">Pipeline Execution</h2>
<p>The run function is where the main data processing pipeline is defined. It uses the previously defined transformations to process bonds, group them by certain criteria (like ISIN), filter, and then export them. Different kinds of bonds (e.g., dropped bonds, bonds per universe) are handled separately in the pipeline.</p>
<p>Main Function:<br />
This is where the script execution starts. It sets up the pipeline options, initializes sources and sinks for data (like ihs_prices_source for reading prices, and dropped_bonds_sink for exporting dropped bonds), and then runs the pipeline.
```</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Bloomberg/" class="btn btn-neutral float-left" title="Bloomberg"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Candidate/" class="btn btn-neutral float-right" title="Candidate">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Bloomberg/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Candidate/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
